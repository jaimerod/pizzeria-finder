<!-- Base elements -->
<link rel="import" href="/elements/pizza-map.html" />
<link rel="import" href="/lib/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/lib/paper-drawer-panel/paper-drawer-panel.html" />
<link rel="import" href="/lib/paper-header-panel/paper-header-panel.html" />
<link rel="import" href="/lib/paper-icon-button/paper-icon-button.html" />
<link rel="import" href="/lib/paper-toolbar/paper-toolbar.html" />
<link rel="import" href="/lib/polymer/polymer.html" />

<dom-module id="pizzaria-finder">
  <template>
    <style></style>
    <paper-drawer-panel force-narrow class="flex">
        <paper-header-panel id="app-filters" drawer>
          <paper-toolbar>
            <div class="title">Filters</div>
          </paper-toolbar>
          <div class="content">
            <paper-button on-click="sortRating">Sort By Rating</paper-button>
            <paper-button on-click="sortAlpha">Sort Alphabetically</paper-button>
            <paper-button on-click="filterOpened">{{openedFilterText}}</paper-button>
            <paper-button on-click="filterDelivery">{{deliveryFilterText}}</paper-button>
          </div>
        </paper-header-panel>
        <paper-header-panel mode="waterfall" main>
          <paper-toolbar>
            <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
            <h1 class="title">LA Pizzeria Finder</h1>
          </paper-toolbar>
          <div class="content">
            <pizza-map></pizza-map>
          </div>
        </paper-header-panel>
      </paper-drawer-panel>
  </template>
  <script>
    Polymer({
      is: 'pizzaria-finder',

      properties: {
        openedFilterText: {
          type: String,
          value: 'Show Open Pizzarias'
        },
        deliveryFilterText: {
          type: String,
          value: 'Delivery Only'
        }
      },

      filterOpened: function () {
        if (this.openedFilterText === 'Show Open Pizzarias') {
          this.openedFilterText = 'Show Open and Closed Pizzarias';
        } else {
          this.openedFilterText = 'Show Open Pizzarias';
        }

        this.$$('pizza-map').fire('filterOpened');
        this.$$('paper-drawer-panel').closeDrawer();
      },

      filterDelivery: function () {
        if (this.deliveryFilterText === 'Delivery Only') {
          this.deliveryFilterText = 'Remove Delivery Filter';
        } else {
          this.deliveryFilterText = 'Delivery Only';
        }

        this.$$('pizza-map').fire('filterDeliver');
        this.$$('paper-drawer-panel').closeDrawer();
      },

      sortRating: function () {
        this.$$('pizza-map').fire('sortRating');
        this.$$('paper-drawer-panel').closeDrawer();
      },

      sortAlpha: function () {
        this.$$('pizza-map').fire('sortAlpha');
        this.$$('paper-drawer-panel').closeDrawer();
      }
    });
  </script>
</dom-module>